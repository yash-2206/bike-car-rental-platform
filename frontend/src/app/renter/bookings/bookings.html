<!-- Bookings Section -->
<div class="bookings-row" *ngIf="bookings?.length; else noBookings">
  <mat-card class="booking-card modern-card" *ngFor="let b of bookings; trackBy: trackByBookingId">

    <!-- Booking Image -->
    <div class="booking-image">
      <img [src]="getImage(b)" [alt]="vehicleName(b)" (error)="onImageError($event)" />
    </div>

    <!-- Booking Details -->
    <mat-card-content>
      <h3 class="vehicle-title">{{ vehicleName(b) }}</h3>

      <p class="booking-dates">
        <mat-icon>event</mat-icon>
        {{ (b?.start_datetime || b?.start_date) | date:'mediumDate' }}
        →
        {{ (b?.end_datetime || b?.end_date) | date:'mediumDate' }}
      </p>

      <!-- Chips -->
      <mat-chip-set class="chips">
        <mat-chip color="primary" *ngIf="b?.total_cost" selected>
          <mat-icon>currency_rupee</mat-icon> {{ b.total_cost }}
        </mat-chip>
        <mat-chip [color]="statusColor(b.status || 'pending')" selected>
          <mat-icon>info</mat-icon> {{ b?.status || 'pending' }}
        </mat-chip>
        <mat-chip color="success" *ngIf="b?.payment_status === 'paid'" selected>
          <mat-icon>check_circle</mat-icon> Paid
        </mat-chip>
      </mat-chip-set>
    </mat-card-content>



    
      <!-- Pay button -->


      <mat-card-actions class="action-buttons">
        <button mat-raised-button color="primary" *ngIf="b?.payment_status !== 'paid'" [disabled]="payingId === b?.id"
          (click)="onPay(b)">
          {{ payingId === b?.id ? 'Processing…' : 'Pay Now' }}
        </button>
      
        <button mat-raised-button color="warn" (click)="onDelete(b)">
          <mat-icon>delete</mat-icon> Delete
        </button>
      </mat-card-actions>


 
      <!-- Delete button -->
      
    

  </mat-card>
</div>

<!-- Empty state -->
<ng-template #noBookings>
  <div class="empty-state text-center">
    <mat-icon class="empty-icon">calendar_today</mat-icon>
    <h4>No bookings yet</h4>
    <p>Looks like you haven’t booked any rides yet.</p>
    <button mat-stroked-button color="primary">Book a Vehicle</button>
  </div>
</ng-template>