<div class="vehicle-detail-container" *ngIf="vehicle">
  <!-- Vehicle Card -->
  <mat-card class="vehicle-card">
<img mat-card-image [src]="vehicle?.images?.[0]?.image_url || 'assets/images/placeholder-vehicle.jpg'"
  [alt]="vehicle?.name || 'Vehicle Image'" class="rounded-top" (error)="onImageError($event)">
    <mat-card-content>
      <h1>{{ vehicle.name }}</h1>
      <p class="price">₹{{ vehicle.price_per_day}}/day</p>
      
      <ul class="features">
        <li><strong>Type:</strong> {{ vehicle.type || 'N/A' }}</li>
        <li><strong>Brand:</strong> {{ vehicle.brand || 'N/A' }}</li>
        <li><strong>Model:</strong> {{ vehicle.model || 'N/A' }}</li>
        <li><strong>Location:</strong> {{ vehicle.location || 'N/A' }}</li>
      </ul>
    </mat-card-content>
  </mat-card>

  <!-- Booking Section -->
  <mat-card class="booking-card">
    <mat-card-content>
      <h2>Book This Vehicle</h2>

      <div class="date-inputs">
        <div>
          <label>Start Date</label>
          <input type="date" [(ngModel)]="start_date">
        </div>
        <div>
          <label>End Date</label>
          <input type="date" [(ngModel)]="end_date">
        </div>
      </div>

      <div class="actions">
        <button mat-raised-button color="primary" (click)="check()">Check Availability</button>
      
        <!-- Only show if renter -->
        <button *ngIf="userRole === 'renter'" mat-raised-button color="accent" [disabled]="availability !== true"
          (click)="book()">
          Book Now
        </button>

        <ng-template #loginPrompt>
          <p>Please log in as a renter to book this vehicle.</p>
        </ng-template>
      </div>

      <!-- Availability Message -->
      <div class="availability" *ngIf="availability !== null">
        <span [class.available]="availability" [class.unavailable]="!availability">
          {{ availability ? '✅ Available for booking' : '❌ Not available for selected dates' }}
        </span>
      </div>
    </mat-card-content>
  </mat-card>
</div>

<!-- Empty/Fallback State -->
<div class="loading" *ngIf="!vehicle">
  <p>Loading vehicle details...</p>
</div>